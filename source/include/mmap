#pragma once

#include <immu>

namespace saturn {

namespace core {
	extern IMemoryManagementUnit* Saturn_MMU;
}; // namespace core

class MMap {
public:
	struct IO_Region
	{
		uint64_t Base;
		size_t Size;
	};

public:
	MMap(const IO_Region& io, MMapType type = MMapType::Device)
		: Base(io.Base)
		, Size(io.Size)
		, Type(type)
	{
		core::Saturn_MMU->MemoryMap(Base, Size, Type);
	};

	~MMap()
	{
		core::Saturn_MMU->MemoryUnmap(Base, Size);
	};

public:
	uint64_t GetBase(void)
	{
		return Base;
	};

private:
	uint64_t	Base;
	size_t		Size;
	MMapType	Type;
};

}; // namespace saturn
